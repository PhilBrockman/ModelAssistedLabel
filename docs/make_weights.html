---

title: AutoWeights


keywords: fastai
sidebar: home_sidebar

summary: "Prepare files in repository to run the `train.py` file."
description: "Prepare files in repository to run the `train.py` file."
nb_path: "03_make_weights.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 03_make_weights.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="AutoWeights" class="doc_header"><code>class</code> <code>AutoWeights</code><a href="https://github.com/PhilBrockman/ModelAssistedLabel/tree/master/ModelAssistedLabel/core.py#L362" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>AutoWeights</code>(<strong><code>resource_dir</code></strong>, <strong><code>name</code></strong>=<em><code>'DEFAULT'</code></em>, <strong><code>out_dir</code></strong>=<em><code>'.'</code></em>, <strong><code>MAX_SIZE</code></strong>=<em><code>5</code></em>, <strong><code>custom_data_yaml</code></strong>=<em><code>None</code></em>, <strong><code>verbose</code></strong>=<em><code>True</code></em>, <strong><code>train_path</code></strong>=<em><code>'yolov5/runs/train'</code></em>)</p>
</blockquote>
<p>Given a bag of images (.jpg) and labels (.txt) in YOLOv5 format in a repository,
initialize the ROOT directory with a train-valid-test split and a file needed
by the Ultralytics repository. Pairs are identified if <code>image[:-4] == label[:-4]</code></p>
<p>Then call <code>generate_weights</code> to run <code>train.py</code>. The resultant file will try to
be moved to the <code>out_dir</code> and if a conflict exists, a new name will be made.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">run</span> &quot;_Synch.ipynb&quot;
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>/content/drive/MyDrive/Coding/ModelAssistedLabel
install nbdev: yes
build resources: yes
Converted 00_ultralytics.ipynb.
Converted 01_split.ipynb.
Converted 02_train.ipynb.
Converted 03_make_weights.ipynb.
Converted index.ipynb.
converting: /content/drive/My Drive/Coding/ModelAssistedLabel/03_make_weights.ipynb
converting /content/drive/My Drive/Coding/ModelAssistedLabel/index.ipynb to README.md
git commit -m: AutoWeights up and running!

Executing: git config --local include.path ../.gitconfig
Success: hooks are installed and repo&#39;s .gitconfig is now trusted
[master 6522419] AutoWeights up and running!
 52 files changed, 536 insertions(+), 214 deletions(-)
 create mode 100644 nospaces7-015663/confusion_matrix.png
 create mode 100644 nospaces7-015663/events.out.tfevents.1615918698.a1fc836e6b08.816.0
 create mode 100644 nospaces7-015663/hyp.yaml
 create mode 100644 nospaces7-015663/labels.jpg
 create mode 100644 nospaces7-015663/labels_correlogram.jpg
 create mode 100644 nospaces7-015663/opt.yaml
 create mode 100644 nospaces7-015663/results.png
 create mode 100644 nospaces7-015663/results.txt
 create mode 100644 nospaces7-015663/test_batch0_labels.jpg
 create mode 100644 nospaces7-015663/test_batch0_pred.jpg
 create mode 100644 nospaces7-015663/train_batch0.jpg
 create mode 100644 nospaces7-015663/train_batch1.jpg
 create mode 100644 nospaces7-015663/train_batch2.jpg
 create mode 100644 nospaces7-015663/weights/best.pt
 create mode 100644 nospaces7-015663/weights/last.pt
 create mode 100644 nospaces7-868139/confusion_matrix.png
 create mode 100644 nospaces7-868139/events.out.tfevents.1615918481.a1fc836e6b08.535.0
 create mode 100644 nospaces7-868139/hyp.yaml
 create mode 100644 nospaces7-868139/labels.jpg
 create mode 100644 nospaces7-868139/labels_correlogram.jpg
 create mode 100644 nospaces7-868139/opt.yaml
 create mode 100644 nospaces7-868139/results.png
 create mode 100644 nospaces7-868139/results.txt
 create mode 100644 nospaces7-868139/test_batch0_labels.jpg
 create mode 100644 nospaces7-868139/test_batch0_pred.jpg
 create mode 100644 nospaces7-868139/train_batch0.jpg
 create mode 100644 nospaces7-868139/train_batch1.jpg
 create mode 100644 nospaces7-868139/train_batch2.jpg
 create mode 100644 nospaces7-868139/weights/best.pt
 create mode 100644 nospaces7-868139/weights/last.pt
 create mode 100644 nospaces7-896351/confusion_matrix.png
 create mode 100644 nospaces7-896351/events.out.tfevents.1615920176.a1fc836e6b08.1290.0
 create mode 100644 nospaces7-896351/hyp.yaml
 create mode 100644 nospaces7-896351/labels.jpg
 create mode 100644 nospaces7-896351/labels_correlogram.jpg
 create mode 100644 nospaces7-896351/opt.yaml
 create mode 100644 nospaces7-896351/results.png
 create mode 100644 nospaces7-896351/results.txt
 create mode 100644 nospaces7-896351/test_batch0_labels.jpg
 create mode 100644 nospaces7-896351/test_batch0_pred.jpg
 create mode 100644 nospaces7-896351/train_batch0.jpg
 create mode 100644 nospaces7-896351/train_batch1.jpg
 create mode 100644 nospaces7-896351/train_batch2.jpg
 create mode 100644 nospaces7-896351/weights/best.pt
 create mode 100644 nospaces7-896351/weights/last.pt
Counting objects: 59, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (58/58), done.
Writing objects: 100% (59/59), 19.75 MiB | 4.85 MiB/s, done.
Total 59 (delta 16), reused 0 (delta 0)
remote: Resolving deltas: 100% (16/16), completed with 8 local objects.
To https://github.com/PhilBrockman/ModelAssistedLabel.git
   f67100f..6522419  master -&gt; master
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>nbdev_build_lib
<span class="o">!</span>nbdev_build_docs
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Converted 00_ultralytics.ipynb.
Converted 01_split.ipynb.
Converted 02_train.ipynb.
Converted 03_make_weights.ipynb.
Converted index.ipynb.
converting: /content/drive/My Drive/Coding/ModelAssistedLabel/03_make_weights.ipynb
converting /content/drive/My Drive/Coding/ModelAssistedLabel/index.ipynb to README.md
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>git add -u
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>git commit -m <span class="s2">&quot;updating site&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[master 910307f] updating site
 3 files changed, 145 insertions(+), 51 deletions(-)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>git push -u origin master 
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Counting objects: 6, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (6/6), done.
Writing objects: 100% (6/6), 1.85 KiB | 145.00 KiB/s, done.
Total 6 (delta 5), reused 0 (delta 0)
remote: Resolving deltas: 100% (5/5), completed with 5 local objects.
To https://github.com/PhilBrockman/ModelAssistedLabel.git
   c10854f..910307f  master -&gt; master
Branch &#39;master&#39; set up to track remote branch &#39;master&#39; from &#39;origin&#39;.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

